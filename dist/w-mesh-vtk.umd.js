/*!
 * w-mesh-vtk v1.0.0
 * (c) 2018-2021 yuda-lyu(semisphere)
 * Released under the MIT License.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("path"),require("fs")):"function"==typeof define&&define.amd?define(["path","fs"],e):(t="undefined"!=typeof globalThis?globalThis:t||self)["w-mesh-vtk"]=e(t.path,t.fs)}(this,function(t,e){"use strict";var r=Array.isArray,n="object"==typeof global&&global&&global.Object===Object&&global,o="object"==typeof self&&self&&self.Object===Object&&self,u=n||o||Function("return this")(),i=u.Symbol,f=Object.prototype,c=f.hasOwnProperty,a=f.toString,l=i?i.toStringTag:void 0;var s=Object.prototype.toString;var p=i?i.toStringTag:void 0;function h(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":p&&p in Object(t)?function(t){var e=c.call(t,l),r=t[l];try{t[l]=void 0;var n=!0}catch(t){}var o=a.call(t);return n&&(e?t[l]=r:delete t[l]),o}(t):function(t){return s.call(t)}(t)}function v(t){return null!=t&&"object"==typeof t}function y(t){return"symbol"==typeof t||v(t)&&"[object Symbol]"==h(t)}var b=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,d=/^\w*$/;function _(t,e){if(r(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!y(t))||(d.test(t)||!b.test(t)||null!=e&&t in Object(e))}function g(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function j(t){if(!g(t))return!1;var e=h(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}var w,O=u["__core-js_shared__"],m=(w=/[^.]+$/.exec(O&&O.keys&&O.keys.IE_PROTO||""))?"Symbol(src)_1."+w:"";var A=Function.prototype.toString;function S(t){if(null!=t){try{return A.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var x=/^\[object .+?Constructor\]$/,E=Function.prototype,z=Object.prototype,R=E.toString,$=z.hasOwnProperty,P=RegExp("^"+R.call($).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function T(t){return!(!g(t)||(e=t,m&&m in e))&&(j(t)?P:x).test(S(t));var e}function k(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return T(r)?r:void 0}var L=k(Object,"create");var N=Object.prototype.hasOwnProperty;var F=Object.prototype.hasOwnProperty;function I(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function U(t,e){return t===e||t!=t&&e!=e}function C(t,e){for(var r=t.length;r--;)if(U(t[r][0],e))return r;return-1}I.prototype.clear=function(){this.__data__=L?L(null):{},this.size=0},I.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},I.prototype.get=function(t){var e=this.__data__;if(L){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return N.call(e,t)?e[t]:void 0},I.prototype.has=function(t){var e=this.__data__;return L?void 0!==e[t]:F.call(e,t)},I.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=L&&void 0===e?"__lodash_hash_undefined__":e,this};var D=Array.prototype.splice;function M(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}M.prototype.clear=function(){this.__data__=[],this.size=0},M.prototype.delete=function(t){var e=this.__data__,r=C(e,t);return!(r<0)&&(r==e.length-1?e.pop():D.call(e,r,1),--this.size,!0)},M.prototype.get=function(t){var e=this.__data__,r=C(e,t);return r<0?void 0:e[r][1]},M.prototype.has=function(t){return C(this.__data__,t)>-1},M.prototype.set=function(t,e){var r=this.__data__,n=C(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};var B=k(u,"Map");function V(t,e){var r,n,o=t.__data__;return("string"==(n=typeof(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof e?"string":"hash"]:o.map}function q(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}q.prototype.clear=function(){this.size=0,this.__data__={hash:new I,map:new(B||M),string:new I}},q.prototype.delete=function(t){var e=V(this,t).delete(t);return this.size-=e?1:0,e},q.prototype.get=function(t){return V(this,t).get(t)},q.prototype.has=function(t){return V(this,t).has(t)},q.prototype.set=function(t,e){var r=V(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};function W(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var r=function(){var n=arguments,o=e?e.apply(this,n):n[0],u=r.cache;if(u.has(o))return u.get(o);var i=t.apply(this,n);return r.cache=u.set(o,i)||u,i};return r.cache=new(W.Cache||q),r}W.Cache=q;var G,K,Y,H=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,J=/\\(\\)?/g,Q=(G=function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(H,function(t,r,n,o){e.push(n?o.replace(J,"$1"):r||t)}),e},K=W(G,function(t){return 500===Y.size&&Y.clear(),t}),Y=K.cache,K),X=Q;function Z(t,e){for(var r=-1,n=null==t?0:t.length,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}var tt=i?i.prototype:void 0,et=tt?tt.toString:void 0;function rt(t){if("string"==typeof t)return t;if(r(t))return Z(t,rt)+"";if(y(t))return et?et.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function nt(t){return null==t?"":rt(t)}function ot(t,e){return r(t)?t:_(t,e)?[t]:X(nt(t))}function ut(t){if("string"==typeof t||y(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function it(t,e){for(var r=0,n=(e=ot(e,t)).length;null!=t&&r<n;)t=t[ut(e[r++])];return r&&r==n?t:void 0}function ft(t,e,r){var n=null==t?void 0:it(t,e);return void 0===n?r:n}function ct(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t}var at,lt=function(t,e,r){for(var n=-1,o=Object(t),u=r(t),i=u.length;i--;){var f=u[at?i:++n];if(!1===e(o[f],f,o))break}return t};function st(t){return v(t)&&"[object Arguments]"==h(t)}var pt=Object.prototype,ht=pt.hasOwnProperty,vt=pt.propertyIsEnumerable,yt=st(function(){return arguments}())?st:function(t){return v(t)&&ht.call(t,"callee")&&!vt.call(t,"callee")},bt=yt;var dt="object"==typeof exports&&exports&&!exports.nodeType&&exports,_t=dt&&"object"==typeof module&&module&&!module.nodeType&&module,gt=_t&&_t.exports===dt?u.Buffer:void 0,jt=(gt?gt.isBuffer:void 0)||function(){return!1},wt=/^(?:0|[1-9]\d*)$/;function Ot(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&wt.test(t))&&t>-1&&t%1==0&&t<e}function mt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}var At={};function St(t){return function(e){return t(e)}}At["[object Float32Array]"]=At["[object Float64Array]"]=At["[object Int8Array]"]=At["[object Int16Array]"]=At["[object Int32Array]"]=At["[object Uint8Array]"]=At["[object Uint8ClampedArray]"]=At["[object Uint16Array]"]=At["[object Uint32Array]"]=!0,At["[object Arguments]"]=At["[object Array]"]=At["[object ArrayBuffer]"]=At["[object Boolean]"]=At["[object DataView]"]=At["[object Date]"]=At["[object Error]"]=At["[object Function]"]=At["[object Map]"]=At["[object Number]"]=At["[object Object]"]=At["[object RegExp]"]=At["[object Set]"]=At["[object String]"]=At["[object WeakMap]"]=!1;var xt="object"==typeof exports&&exports&&!exports.nodeType&&exports,Et=xt&&"object"==typeof module&&module&&!module.nodeType&&module,zt=Et&&Et.exports===xt&&n.process,Rt=function(){try{var t=Et&&Et.require&&Et.require("util").types;return t||zt&&zt.binding&&zt.binding("util")}catch(t){}}(),$t=Rt&&Rt.isTypedArray,Pt=$t?St($t):function(t){return v(t)&&mt(t.length)&&!!At[h(t)]},Tt=Object.prototype.hasOwnProperty;function kt(t,e){var n=r(t),o=!n&&bt(t),u=!n&&!o&&jt(t),i=!n&&!o&&!u&&Pt(t),f=n||o||u||i,c=f?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],a=c.length;for(var l in t)!e&&!Tt.call(t,l)||f&&("length"==l||u&&("offset"==l||"parent"==l)||i&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Ot(l,a))||c.push(l);return c}var Lt=Object.prototype;var Nt=function(t,e){return function(r){return t(e(r))}}(Object.keys,Object),Ft=Nt,It=Object.prototype.hasOwnProperty;function Ut(t){if(r=(e=t)&&e.constructor,e!==("function"==typeof r&&r.prototype||Lt))return Ft(t);var e,r,n=[];for(var o in Object(t))It.call(t,o)&&"constructor"!=o&&n.push(o);return n}function Ct(t){return null!=t&&mt(t.length)&&!j(t)}function Dt(t){return Ct(t)?kt(t):Ut(t)}var Mt=function(t,e){return function(r,n){if(null==r)return r;if(!Ct(r))return t(r,n);for(var o=r.length,u=e?o:-1,i=Object(r);(e?u--:++u<o)&&!1!==n(i[u],u,i););return r}}(function(t,e){return t&&lt(t,e,Dt)}),Bt=Mt;function Vt(t){return t}function qt(t,e){var n;return(r(t)?ct:Bt)(t,"function"==typeof(n=e)?n:Vt)}function Wt(t){var e=this.__data__=new M(t);this.size=e.size}Wt.prototype.clear=function(){this.__data__=new M,this.size=0},Wt.prototype.delete=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},Wt.prototype.get=function(t){return this.__data__.get(t)},Wt.prototype.has=function(t){return this.__data__.has(t)},Wt.prototype.set=function(t,e){var r=this.__data__;if(r instanceof M){var n=r.__data__;if(!B||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new q(n)}return r.set(t,e),this.size=r.size,this};function Gt(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new q;++e<r;)this.add(t[e])}function Kt(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}function Yt(t,e){return t.has(e)}Gt.prototype.add=Gt.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Gt.prototype.has=function(t){return this.__data__.has(t)};function Ht(t,e,r,n,o,u){var i=1&r,f=t.length,c=e.length;if(f!=c&&!(i&&c>f))return!1;var a=u.get(t),l=u.get(e);if(a&&l)return a==e&&l==t;var s=-1,p=!0,h=2&r?new Gt:void 0;for(u.set(t,e),u.set(e,t);++s<f;){var v=t[s],y=e[s];if(n)var b=i?n(y,v,s,e,t,u):n(v,y,s,t,e,u);if(void 0!==b){if(b)continue;p=!1;break}if(h){if(!Kt(e,function(t,e){if(!Yt(h,e)&&(v===t||o(v,t,r,n,u)))return h.push(e)})){p=!1;break}}else if(v!==y&&!o(v,y,r,n,u)){p=!1;break}}return u.delete(t),u.delete(e),p}var Jt=u.Uint8Array;function Qt(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r}function Xt(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}var Zt=i?i.prototype:void 0,te=Zt?Zt.valueOf:void 0;var ee=Object.prototype.propertyIsEnumerable,re=Object.getOwnPropertySymbols,ne=re?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var r=-1,n=null==t?0:t.length,o=0,u=[];++r<n;){var i=t[r];e(i,r,t)&&(u[o++]=i)}return u}(re(t),function(e){return ee.call(t,e)}))}:function(){return[]},oe=ne;function ue(t){return function(t,e,n){var o=e(t);return r(t)?o:function(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}(o,n(t))}(t,Dt,oe)}var ie=Object.prototype.hasOwnProperty;var fe=k(u,"DataView"),ce=k(u,"Promise"),ae=k(u,"Set"),le=k(u,"WeakMap"),se="[object Map]",pe="[object Promise]",he="[object Set]",ve="[object WeakMap]",ye="[object DataView]",be=S(fe),de=S(B),_e=S(ce),ge=S(ae),je=S(le),we=h;(fe&&we(new fe(new ArrayBuffer(1)))!=ye||B&&we(new B)!=se||ce&&we(ce.resolve())!=pe||ae&&we(new ae)!=he||le&&we(new le)!=ve)&&(we=function(t){var e=h(t),r="[object Object]"==e?t.constructor:void 0,n=r?S(r):"";if(n)switch(n){case be:return ye;case de:return se;case _e:return pe;case ge:return he;case je:return ve}return e});var Oe=we,me="[object Arguments]",Ae="[object Array]",Se="[object Object]",xe=Object.prototype.hasOwnProperty;function Ee(t,e,n,o,u,i){var f=r(t),c=r(e),a=f?Ae:Oe(t),l=c?Ae:Oe(e),s=(a=a==me?Se:a)==Se,p=(l=l==me?Se:l)==Se,h=a==l;if(h&&jt(t)){if(!jt(e))return!1;f=!0,s=!1}if(h&&!s)return i||(i=new Wt),f||Pt(t)?Ht(t,e,n,o,u,i):function(t,e,r,n,o,u,i){switch(r){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!u(new Jt(t),new Jt(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return U(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var f=Qt;case"[object Set]":var c=1&n;if(f||(f=Xt),t.size!=e.size&&!c)return!1;var a=i.get(t);if(a)return a==e;n|=2,i.set(t,e);var l=Ht(f(t),f(e),n,o,u,i);return i.delete(t),l;case"[object Symbol]":if(te)return te.call(t)==te.call(e)}return!1}(t,e,a,n,o,u,i);if(!(1&n)){var v=s&&xe.call(t,"__wrapped__"),y=p&&xe.call(e,"__wrapped__");if(v||y){var b=v?t.value():t,d=y?e.value():e;return i||(i=new Wt),u(b,d,n,o,i)}}return!!h&&(i||(i=new Wt),function(t,e,r,n,o,u){var i=1&r,f=ue(t),c=f.length;if(c!=ue(e).length&&!i)return!1;for(var a=c;a--;){var l=f[a];if(!(i?l in e:ie.call(e,l)))return!1}var s=u.get(t),p=u.get(e);if(s&&p)return s==e&&p==t;var h=!0;u.set(t,e),u.set(e,t);for(var v=i;++a<c;){var y=t[l=f[a]],b=e[l];if(n)var d=i?n(b,y,l,e,t,u):n(y,b,l,t,e,u);if(!(void 0===d?y===b||o(y,b,r,n,u):d)){h=!1;break}v||(v="constructor"==l)}if(h&&!v){var _=t.constructor,g=e.constructor;_==g||!("constructor"in t)||!("constructor"in e)||"function"==typeof _&&_ instanceof _&&"function"==typeof g&&g instanceof g||(h=!1)}return u.delete(t),u.delete(e),h}(t,e,n,o,u,i))}function ze(t,e,r,n,o){return t===e||(null==t||null==e||!v(t)&&!v(e)?t!=t&&e!=e:Ee(t,e,r,n,ze,o))}function Re(t){return t==t&&!g(t)}function $e(t,e){return function(r){return null!=r&&(r[t]===e&&(void 0!==e||t in Object(r)))}}function Pe(t){var e=function(t){for(var e=Dt(t),r=e.length;r--;){var n=e[r],o=t[n];e[r]=[n,o,Re(o)]}return e}(t);return 1==e.length&&e[0][2]?$e(e[0][0],e[0][1]):function(r){return r===t||function(t,e,r,n){var o=r.length,u=o,i=!n;if(null==t)return!u;for(t=Object(t);o--;){var f=r[o];if(i&&f[2]?f[1]!==t[f[0]]:!(f[0]in t))return!1}for(;++o<u;){var c=(f=r[o])[0],a=t[c],l=f[1];if(i&&f[2]){if(void 0===a&&!(c in t))return!1}else{var s=new Wt;if(n)var p=n(a,l,c,t,e,s);if(!(void 0===p?ze(l,a,3,n,s):p))return!1}}return!0}(r,t,e)}}function Te(t,e){return null!=t&&e in Object(t)}function ke(t,e){return null!=t&&function(t,e,n){for(var o=-1,u=(e=ot(e,t)).length,i=!1;++o<u;){var f=ut(e[o]);if(!(i=null!=t&&n(t,f)))break;t=t[f]}return i||++o!=u?i:!!(u=null==t?0:t.length)&&mt(u)&&Ot(f,u)&&(r(t)||bt(t))}(t,e,Te)}function Le(t){return function(e){return null==e?void 0:e[t]}}function Ne(t){return _(t)?Le(ut(t)):function(t){return function(e){return it(e,t)}}(t)}function Fe(t){return"function"==typeof t?t:null==t?Vt:"object"==typeof t?r(t)?function(t,e){return _(t)&&Re(e)?$e(ut(t),e):function(r){var n=ft(r,t);return void 0===n&&n===e?ke(r,t):ze(e,n,3)}}(t[0],t[1]):Pe(t):Ne(t)}function Ie(t,e){var r=-1,n=Ct(t)?Array(t.length):[];return Bt(t,function(t,o,u){n[++r]=e(t,o,u)}),n}var Ue=Le("length"),Ce=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function De(t){return Ce.test(t)}var Me="\\ud800-\\udfff",Be="["+Me+"]",Ve="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",qe="\\ud83c[\\udffb-\\udfff]",We="[^"+Me+"]",Ge="(?:\\ud83c[\\udde6-\\uddff]){2}",Ke="[\\ud800-\\udbff][\\udc00-\\udfff]",Ye="(?:"+Ve+"|"+qe+")"+"?",He="[\\ufe0e\\ufe0f]?",Je=He+Ye+("(?:\\u200d(?:"+[We,Ge,Ke].join("|")+")"+He+Ye+")*"),Qe="(?:"+[We+Ve+"?",Ve,Ge,Ke,Be].join("|")+")",Xe=RegExp(qe+"(?="+qe+")|"+Qe+Je,"g");function Ze(t){return De(t)?function(t){for(var e=Xe.lastIndex=0;Xe.test(t);)++e;return e}(t):Ue(t)}function tr(t){if(null==t)return 0;if(Ct(t))return"string"==typeof(e=t)||!r(e)&&v(e)&&"[object String]"==h(e)?Ze(t):t.length;var e,n=Oe(t);return"[object Map]"==n||"[object Set]"==n?t.size:Ut(t).length}var er=Array.prototype.join;function rr(t,e){return null==t?"":er.call(t,e)}function nr(t){return"[object String]"===Object.prototype.toString.call(t)}function or(t){return!(!nr(t)||""===t)}function ur(t){return"[object Object]"===Object.prototype.toString.call(t)}function ir(t){if(ur(t)){for(let e in t)return!0;return!1}return!1}function fr(t){return"[object Array]"===Object.prototype.toString.call(t)}function cr(t){return t!=t}function ar(t){return!!function(t){return"[object Undefined]"===Object.prototype.toString.call(t)}(t)||(!!function(t){return"[object Null]"===Object.prototype.toString.call(t)}(t)||(!!function(t){if(ur(t)){for(let e in t)return!1;return!0}return!1}(t)||(!!function(t){return!(!nr(t)||""!==t)}(t)||(!!function(t){return!!fr(t)&&0===t.length}(t)||!!cr(t)))))}function lr(t){return!!fr(t)&&(0!==t.length&&(1!==t.length||!ar(t[0])))}function sr(t){let e=!1;if(or(t))e=!isNaN(Number(t));else if(function(t){return"[object Number]"===Object.prototype.toString.call(t)}(t)){if(cr(t))return!1;e=!0}return e}function pr(t,e,r){var n=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(r=r>o?o:r)<0&&(r+=o),o=e>r?0:r-e>>>0,e>>>=0;for(var u=Array(o);++n<o;)u[n]=t[n+e];return u}var hr=/\s/;var vr=/^\s+/;function yr(t){return t?t.slice(0,function(t){for(var e=t.length;e--&&hr.test(t.charAt(e)););return e}(t)+1).replace(vr,""):t}var br=/^[-+]0x[0-9a-f]+$/i,dr=/^0b[01]+$/i,_r=/^0o[0-7]+$/i,gr=parseInt;function jr(t){if("number"==typeof t)return t;if(y(t))return NaN;if(g(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=g(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=yr(t);var r=dr.test(t);return r||_r.test(t)?gr(t.slice(2),r?2:8):br.test(t)?NaN:+t}var wr=1/0;function Or(t){return t?(t=jr(t))===wr||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function mr(t){var e=Or(t),r=e%1;return e==e?r?e-r:e:0}function Ar(){let t,e,r=new Promise(function(){t=arguments[0],e=arguments[1]});return r.resolve=t,r.reject=e,r}function Sr(t){let e=Object.prototype.toString.call(t);return"[object Function]"===e||"[object AsyncFunction]"===e}function xr(t,e){let r=Ar();if(!fr(t)&&!ur(t))return r.reject("rs is not an array or object"),r;let n=!1;if(ur(t)){n=!0;let e=[];qt(t,(t,r)=>{e.push({k:r,v:t})}),t=e}Sr(e)||(e=function(t){return t});let o=-1,u=[];return t.reduce(function(t,r){return t.then(function(t){u.push(t),o+=1;let i=o,f=r;return n&&(i=r.k,f=r.v),Sr(e)?e(f,i):f})},Promise.resolve()).then(function(t){var e,n,o,i;u.push(t),i=null==(e=u)?0:e.length,u=i?pr(e,(n=o||void 0===n?1:mr(n))<0?0:n,i):[],r.resolve(u)}).catch(function(t){r.reject(t)}),r}function Er(t){if(!sr(t))return 0;return Or(t)}function zr(t){return!!sr(t)&&(t=Er(t),"number"==typeof(e=t)&&e==mr(e));var e}var Rr=u.isFinite,$r=Math.min;var Pr=function(t){var e=Math[t];return function(t,r){if(t=jr(t),(r=null==r?0:$r(mr(r),292))&&Rr(t)){var n=(nt(t)+"e").split("e");return+((n=(nt(e(n[0]+"e"+(+n[1]+r)))+"e").split("e"))[0]+"e"+(+n[1]-r))}return e(t)}}("round"),Tr=Pr;function kr(t){if(!sr(t))return 0;t=Er(t);let e=Tr(t);return"0"===String(e)?0:e}function Lr(t){if(!zr(t))return!1;return kr(t)>=0}function Nr(t,e){if(!or(t))return"";if(!Lr(e))return"";if(0===(e=kr(e)))return"";let r=t.length-e;return r<0&&(r=0),t.substring(r,r+e)}function Fr(t,e){return or(t)&&Lr(e)?0===(e=kr(e))?t:function(t,e){return or(t)&&Lr(e)?0===(e=kr(e))?"":t.substring(0,e):""}(t,t.length-e):""}function Ir(t){if(!or(t))return{path:"",isRoot:!1};for(;t.indexOf("\\\\")>=0;)t=t.replace("\\\\","\\");for(;t.indexOf("//")>=0;)t=t.replace("//","/");if(":"===Nr(t,1))return{path:`${t}\\`,isRoot:!0};if("\\"===Nr(t,1)){let e=Fr(t,1);return":"===Nr(e,1)?{path:t,isRoot:!0}:{path:e,isRoot:!1}}if("/"===Nr(t,1)){let e=Fr(t,1);return 0===e.length?{path:t,isRoot:!0}:{path:e,isRoot:!1}}return{path:t,isRoot:!1}}function Ur(t){if(!or(t))return"";let e=Ir(t);if(e.isRoot)return e.path;let r=e.path;try{r=r.split("\\").pop().split("/").pop()}catch(t){}return r}var Cr=Rt&&Rt.isRegExp,Dr=Cr?St(Cr):function(t){return v(t)&&"[object RegExp]"==h(t)};var Mr="\\ud800-\\udfff",Br="["+Mr+"]",Vr="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",qr="\\ud83c[\\udffb-\\udfff]",Wr="[^"+Mr+"]",Gr="(?:\\ud83c[\\udde6-\\uddff]){2}",Kr="[\\ud800-\\udbff][\\udc00-\\udfff]",Yr="(?:"+Vr+"|"+qr+")"+"?",Hr="[\\ufe0e\\ufe0f]?",Jr=Hr+Yr+("(?:\\u200d(?:"+[Wr,Gr,Kr].join("|")+")"+Hr+Yr+")*"),Qr="(?:"+[Wr+Vr+"?",Vr,Gr,Kr,Br].join("|")+")",Xr=RegExp(qr+"(?="+qr+")|"+Qr+Jr,"g");function Zr(t){return De(t)?function(t){return t.match(Xr)||[]}(t):function(t){return t.split("")}(t)}function tn(t,e,r){return r&&"number"!=typeof r&&function(t,e,r){if(!g(r))return!1;var n=typeof e;return!!("number"==n?Ct(r)&&Ot(e,r.length):"string"==n&&e in r)&&U(r[e],t)}(t,e,r)&&(e=r=void 0),(r=void 0===r?4294967295:r>>>0)?(t=nt(t))&&("string"==typeof e||null!=e&&!Dr(e))&&!(e=rt(e))&&De(t)?(n=Zr(t),o=0,u=r,i=n.length,u=void 0===u?i:u,!o&&u>=i?n:pr(n,o,u)):t.split(e,r):[];var n,o,u,i}function en(t){if(!or(t))return"";let e=Ur(t),r=tn(e,".");if(tr(r)<=1)return e;let n="";try{r=(f=null==(o=r)?0:o.length)?pr(o,0,(u=f-(u=i||void 0===u?1:mr(u)))<0?0:u):[],n=rr(r,".")}catch(t){}var o,u,i,f;return n}async function rn(t,n){let o=ft(t,"name","");if(!or(o))throw new Error("invalid name");let u=ft(t,"nodes",[]);if(!lr(u))throw new Error("nodes is not an effective array");let i=ft(t,"eles",[]);if(!lr(i))throw new Error("eles is not an effective array");let f=function(){let t=null;return{create:r=>{let n=Ar();return t=e.createWriteStream(r,{flags:"w",encoding:"utf8"}),t.on("finish",()=>{n.resolve()}),t.on("error",t=>{n.reject(t)}),n},write:e=>{t.write(e+"\n")},end:()=>{let e=Ar();return t.on("close",()=>{e.resolve()}),t.end(),e}}}(),c=f.create(n);f.write("# vtk DataFile Version 4.2"),f.write(`${o}`),f.write("ASCII"),f.write("DATASET UNSTRUCTURED_GRID");let a=tr(u),l=tr(i);return f.write(`POINTS ${a} float`),qt(u,t=>{let e=rr([ft(t,"x",0),ft(t,"y",0),ft(t,"z",0)]," ");f.write(e)}),f.write(`CELLS ${l} ${9*l}`),qt(i,t=>{let e=t.nodes;var n,o;o=t=>t-1,e=(r(n=e)?Z:Ie)(n,Fe(o));let u=rr(e," ");u=`8 ${u}`,f.write(u)}),f.write(`CELL_TYPES ${l}`),qt(i,t=>{f.write("12")}),f.write(`POINT_DATA ${a}`),f.write("SCALARS mat int 1"),f.write("LOOKUP_TABLE default"),qt(u,t=>{f.write(ft(t,"mat","0"))}),f.write("SCALARS type int 1"),f.write("LOOKUP_TABLE default"),qt(u,t=>{f.write(ft(t,"type","0"))}),f.end(),c}return{readVtk:async function(t,e,r){return console.log("尚待開發"),null},writeVtk:async function(e,r){if(!ir(e)&&!lr(e))throw new Error("mnes is not an effective object or array");ir(e)&&(e=[e]);let n=tr(e),o=0;await xr(e,async e=>{o++;let u=ft(e,"name","");or(u)||(u=function(t){if(!or(t)&&!sr(t)&&!y(t))return"";let e="";try{e=String(t)}catch(t){}try{e=t.toString()}catch(t){}return e}(o));let i=r;if(n>1){let e=function(t){if(!or(t))return"";let e=Ir(t);if(e.isRoot)return e.path;let r=Ur(t=e.path);if(!or(r))return t;let n=Ir(t=Fr(t,r.length));return n.isRoot,n.path}(r),n=en(r),o=function(t){if(!or(t))return"";let e=tn(Ur(t),".");if(tr(e)<=1)return"";let r="";try{r=(o=null==(n=e)?0:n.length)?n[o-1]:void 0}catch(t){}var n,o;return r}(r);i=t.resolve(e,`${n}_${u}.${o}`)}await rn(e,i)})}}});
//# sourceMappingURL=w-mesh-vtk.umd.js.map
